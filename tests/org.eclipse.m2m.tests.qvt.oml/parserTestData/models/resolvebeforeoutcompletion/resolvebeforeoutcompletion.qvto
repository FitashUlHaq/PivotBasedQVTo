transformation models.resolvebeforeoutcompletion.resolvebeforeoutcompletion;
metamodel 'http://www.eclipse.org/emf/2002/Ecore';

mapping main(pack: ecore::EPackage): ecore::EPackage {
	init {
	   result := pack.main1();
	}
}

mapping ecore::EPackage::main1(): ecore::EPackage {
	object {
		name := 'foo';
		name := result.name + getTargetName(self);
	}
}

query getTargetName(pack: ecore::EPackage): String {
    pack.resolve(ecore::EPackage)->first().name
}
